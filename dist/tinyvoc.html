<!doctype html><html lang=en><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>VocTrainer</title><style>body{background-color:#000;color:#fff;font-family:monospace}strong{color:#00f}h1,p{margin:0}</style><script defer>let db,menu="mm",addstate="key",currentKeyValue="",currentValueValue="",currentTValueValue="",currentRandomKey="";function mkbanner(e,t){const n=t-e.length,l=Math.floor(n/2),a=Math.ceil(n/2);return"-".repeat(l)+e+"-".repeat(a)}function initDB(){const e=indexedDB.open("vocTrainerDB",1);e.onerror=e=>console.log("DB error",e),e.onupgradeneeded=e=>{db=e.target.result,db.objectStoreNames.contains("vocabulary")||db.createObjectStore("vocabulary",{keyPath:"key"})},e.onsuccess=e=>{db=e.target.result,console.log("DB initialized")}}function writeData(e,t){if(!db)return void console.log("DB not initialized yet");const n=db.transaction(["vocabulary"],"readwrite"),l=n.objectStore("vocabulary"),a={key:e,value:t};l.put(a),n.oncomplete=()=>console.log("Data written:",a),n.onerror=e=>console.log("Write error",e)}function getData(e){return new Promise((t,n)=>{if(!db)return void n("DB not initialized");const l=db.transaction(["vocabulary"],"readonly").objectStore("vocabulary").get(e);l.onsuccess=()=>{t(l.result?l.result.value:null)},l.onerror=e=>n(e)})}async function readAllData(){return new Promise((e,t)=>{if(!db)return void t("DB not initialized");const n=db.transaction(["vocabulary"],"readonly").objectStore("vocabulary").getAll();n.onsuccess=()=>e(n.result),n.onerror=e=>t(e)})}document.addEventListener("keydown",async e=>{const t=document.getElementById("selection");if(t.innerText=e.key,t.style.color=["a","t","A","T","-","Enter"].includes(e.key)?"blue":"red","a"!==e.key&&"A"!==e.key||"mm"!==menu){if(("t"===e.key||"T"===e.key)&&"mm"===menu){document.getElementById("mm").style.display="none",document.getElementById("tm").style.display="block",menu="tm";const e=await readAllData();if(e.length>0){const t=Math.floor(Math.random()*e.length);currentRandomKey=e[t].key,document.getElementById("tkey").innerText=currentRandomKey,document.getElementById("tvalue").innerText="???",currentTValueValue=""}else document.getElementById("tkey").innerText="No vocabulary yet!",document.getElementById("tvalue").innerText=""}}else document.getElementById("mm").style.display="none",document.getElementById("am").style.display="block",menu="am",currentKeyValue="",currentValueValue="",document.getElementById("key").innerText="",document.getElementById("valuevalue").innerText="",addstate="key",document.getElementById("value").style.display="none";if("-"===e.key&&("am"===menu?document.getElementById("am").style.display="none":"tm"===menu&&(document.getElementById("tm").style.display="none"),document.getElementById("mm").style.display="block",t.innerText="",menu="mm"),"am"===menu&&("key"===addstate?("Backspace"===e.key?currentKeyValue=currentKeyValue.slice(0,-1):" "===e.key?currentKeyValue+=" ":"Enter"===e.key?(addstate="value",document.getElementById("key").style.color="white",document.getElementById("value").style.display="block",e.preventDefault()):1===e.key.length&&(currentKeyValue+=e.key),document.getElementById("key").innerText=currentKeyValue):"value"===addstate&&("Backspace"===e.key?currentValueValue=currentValueValue.slice(0,-1):" "===e.key?currentValueValue+=" ":"Enter"===e.key?(writeData(currentKeyValue,currentValueValue),currentKeyValue="",currentValueValue="",addstate="key",document.getElementById("key").innerText="",document.getElementById("key").style.color="blue",document.getElementById("value").style.display="none",document.getElementById("valuevalue").innerText="",e.preventDefault()):1===e.key.length&&(currentValueValue+=e.key),document.getElementById("valuevalue").innerText=currentValueValue)),"tm"===menu&&currentRandomKey)if("Enter"===e.key){const t=await getData(currentRandomKey);currentTValueValue.trim()===t?(document.getElementById("tvalue").style.color="green",document.getElementById("tvalue").innerText="Correct!"):(document.getElementById("tvalue").style.color="red",document.getElementById("tvalue").innerText="Incorrect!"),setTimeout(async()=>{const e=await readAllData();if(e.length>0){const t=Math.floor(Math.random()*e.length);currentRandomKey=e[t].key,document.getElementById("tkey").innerText=currentRandomKey,document.getElementById("tvalue").innerText="???",currentTValueValue="",document.getElementById("tvalue").style.color="blue"}},350),e.preventDefault()}else"Backspace"===e.key?(currentTValueValue=currentTValueValue.slice(0,-1),document.getElementById("tvalue").innerText=currentTValueValue||"???"):" "===e.key?(currentTValueValue+=" ",document.getElementById("tvalue").innerText=currentTValueValue):1===e.key.length&&(currentTValueValue+=e.key,document.getElementById("tvalue").innerText=currentTValueValue)}),document.getElementById("vocbanner").innerText=mkbanner("TinyVoc",45),document.getElementById("addbanner").innerText=mkbanner("Add vocabulary",45),document.getElementById("trainbanner").innerText=mkbanner("Train vocabulary",45),document.getElementById("trainfooter").innerText=mkbanner("",45),document.getElementById("vocfooter").innerText=mkbanner("",45),document.getElementById("addfooter").innerText=mkbanner("",45),initDB()</script><div id=mm><p id=vocbanner><p><strong>A</strong>dd vocabulary<p><strong>T</strong>rain vocabulary<p id=vocfooter><p>Your Selection: <strong id=selection></strong></div><div id=am style=display:none><p id=addbanner><p>Press <strong>Enter</strong> to go to the next field<p>Press <strong>-</strong> to save and return to the main menu<p id=addfooter><p>Key: <strong id=key></strong><p id=value>Value: <strong id=valuevalue></strong></div><div id=tm style=display:none><p id=trainbanner><p>Press <strong>Enter</strong> to go to the next field<p>Press <strong>-</strong> to save and return to the main menu<p id=trainfooter><p>Key: <strong id=tkey></strong><p>Value <strong id=tvalue>???</strong></div>
